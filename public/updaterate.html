<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    
      </head>
  </head>
  <body>
    <h1>Upadate Rating</h1>
    
    
    <a href="managerHome.html?deptID=d003&empID=110228">Previous</a>
    
    
    <form id="form1">
      
      <label for="lname">PunctualityAndDiscipline</label>
      <input type="text" id="pa" name="lname" /><br /><br />
      <label for="fname">ExecutionOfDuties</label>
      <input type="text" id="ed" name="fname" /><br /><br />
      <label for="lname">LearningAndDevelopment</label>
      <input type="text" id="ld" name="lname" /><br /><br />
      <label for="fname">TeamCooperation</label>
      <input type="text" id="tc" name="fname" /><br /><br />
      <label for="lname">ResponsibilityTaken</label>
      <input type="text" id="rt" name="lname" /><br /><br />
      <label for="fname">EmpNo</label>
      <input type="text" id="en" name="fname" /><br /><br />
      <input type="button" value="Update Rating" id='update-button'/>
    </form>
    <script>
      document.getElementById('update-button').addEventListener(
        'click',
        function () {
          
          var metric1 = document.getElementById('pa').value;
          var metric2 = document.getElementById('ed').value;
          var metric3 = document.getElementById('ld').value;
          var metric4 = document.getElementById('tc').value;
          var metric5 = document.getElementById('rt').value;
          var emp_no =  document.getElementById('en').value;

          var xhr = new XMLHttpRequest();
          var data = new FormData();
          
          var updaterating_url =
            'http://perfportaltechietribe.ml/updateRating?metric1=' +
            metric1+
            '&metric2=' +
            metric2+
            '&metric3=' +
            metric3+
            '&metric4=' +
            metric4+
            '&metric5=' +
            metric5+
            '&emp_no=' +
            emp_no;
            
          xhr.onreadystatechange = function () {
            //
            
            if (xhr.readyState == 4) {
              // window.alert('xhr status: ' + xhr.status);
              if (xhr.status == 200) {
                // var responsexhr = eval('(' + xhr.responseText + ')');
                window.confirm('Employee Rating updated sucessfully !');
                 window.location = '/';
                xhr=" Employee Rating updated sucessfully";
              } else {
                window.confirm('not 200');
                window.location = '/';
                //xhr=" Employee Rating  not updated ";
              }
            } else {
              
            }
          };
          xhr.open('POST', updaterating_url, true);
          xhr.send(data);
          resetForm();
          
        }
                );
        function resetForm(){
          document.getElementById('pa').value ="";
          document.getElementById('ed').value="";
          document.getElementById('ld').value="";
          document.getElementById('tc').value="";
          document.getElementById('rt').value="";
          document.getElementById('en').value = "";
        }
    </script>
    </body>
    </html>
